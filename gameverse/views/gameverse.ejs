<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gameverse Menu</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    
  <body>
    <div class="main-container">
      <nav class="sidebar">
        <ul class="menu-list no-bullets">
          <li class="menu-item has-submenu">
            <div class="menu-btn toggle-btn">Games</div>
            <ul class="submenu">
              <li><a class="menu-btn" href="#">Tic-Tac-Toe</a></li>
              <li><a class="menu-btn" href="#">Simon Game</a></li>
              <li><a class="menu-btn" href="#">Pexeso</a></li>
            </ul>
          </li>
          <li><a class="menu-btn" href="#">Multiplayer (Coming Soon)</a></li>
          <li><a class="menu-btn" href="#">Leaderboards (Coming Soon)</a></li>
          <li><a class="menu-btn" href="#">Character Creation (Coming Soon)</a></li>
          <li class="menu-item has-submenu">
            <div class="menu-btn toggle-btn">Settings</div>
            <ul class="submenu">
              <li><a class="menu-btn" href="#">Your Gamer Profile</a></li>
              <li><a class="menu-btn" data-page="/load/account-settings" href="#">Account Settings</a></li>
            </ul>
          </li>
          <li><a class="menu-btn drop-it-down" href="http://127.0.0.1:3000/index.html">Exit</a></li>
        </ul>

        <div class="user-panel">
          <p>üßç Player: <%= user?.username || 'Gamer' %></p>
          <p>üíæ Profile Level: 03</p>
          <p>‚è≥ Time Played: 1h 22m</p>
        </div>
      </nav>
    
      <div class="content">
        <% if (showSettings) { %>
          <%- include("partials/account-settings", { error: errorMessage, success: successMessage }) %>
        <% } else { %>
          <h1>Welcome <%= user ? user.username : 'Gamer' %>! <br> Select a game or manage your profile.</h1>
        <% } %>
      </div>
      
    </div>

    <script>
      document.querySelectorAll('.has-submenu .toggle-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const parent = btn.closest('.has-submenu');
          parent.classList.toggle('open');
        });
      });
    </script>

    <script>
      document.querySelectorAll('.menu-btn[data-page]').forEach(link => {
  link.addEventListener('click', async (e) => {
    e.preventDefault();
    const page = link.getAttribute('data-page');

    try {
      const response = await fetch(page);
      const html = await response.text();
      document.querySelector('.content').innerHTML = html;
    } catch (err) {
      console.error(err);
      document.querySelector('.content').innerHTML = '<p>Failed to load content.</p>';
    }
  });
});
    </script>
    
  </body>

</body>
</html>